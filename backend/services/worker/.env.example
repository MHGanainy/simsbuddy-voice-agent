# ============================================================================
# Worker Service Environment Configuration
# Celery workers + beat - executes background tasks and spawns voice agents
# ============================================================================

# ----------------------------------------------------------------------------
# LiveKit Configuration (REQUIRED)
# ----------------------------------------------------------------------------
# Get these from your LiveKit Cloud dashboard or self-hosted server
# Used by worker to spawn voice agents into LiveKit rooms
LIVEKIT_URL=wss://your-project.livekit.cloud
LIVEKIT_API_KEY=APIxxxxxxxxxxxxxxxxx
LIVEKIT_API_SECRET=secretxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# AI Service API Keys (REQUIRED)
# ----------------------------------------------------------------------------
# These are used by the spawned voice agents for AI processing
# Groq LLM - https://console.groq.com/keys
GROQ_API_KEY=gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# AssemblyAI STT - https://www.assemblyai.com/app/account
ASSEMBLY_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Inworld TTS - https://studio.inworld.ai/
INWORLD_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# Database Configuration (REQUIRED)
# ----------------------------------------------------------------------------
# PostgreSQL connection string for transcript storage
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/voice_agent_db

# ----------------------------------------------------------------------------
# Redis Configuration (REQUIRED)
# ----------------------------------------------------------------------------
# Message broker for receiving tasks from orchestrator + session state storage
# When using docker-compose, use: redis://redis:6379/0
# For local development, use: redis://localhost:6379/0
REDIS_URL=redis://redis:6379/0

# ----------------------------------------------------------------------------
# Worker Configuration (Optional)
# ----------------------------------------------------------------------------
# Session timeout in milliseconds (default: 30 minutes)
SESSION_TIMEOUT=1800000

# Agent startup timeout in seconds (how long to wait for LiveKit connection)
BOT_STARTUP_TIMEOUT=30

# Path to voice assistant script inside worker container
PYTHON_SCRIPT_PATH=/app/backend/agent/voice_assistant.py

# Agent log directory inside worker container
AGENT_LOG_DIR=/var/log/voice-agents

# Orchestrator URL for agent heartbeat callbacks
# When using docker-compose with separate services: http://orchestrator:8000
# When using combined service: http://localhost:8000
ORCHESTRATOR_URL=http://orchestrator:8000

# ----------------------------------------------------------------------------
# Logging Configuration (Optional)
# ----------------------------------------------------------------------------
# Log level: DEBUG, INFO (default), WARNING, ERROR, CRITICAL
# DEBUG enables timing instrumentation and detailed task execution logs
LOG_LEVEL=INFO

# Log format: console (dev, human-readable) or json (prod, structured)
LOG_FORMAT=console

# Service name for logs
SERVICE_NAME=worker

# ----------------------------------------------------------------------------
# Internal Configuration (Usually don't need to change)
# ----------------------------------------------------------------------------
# Python module path for imports
PYTHONPATH=/app

# Allow Celery to run as root (needed for Docker containers)
C_FORCE_ROOT=true
