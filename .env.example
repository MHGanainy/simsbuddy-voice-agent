# ============================================================================
# Voice Agent Environment Configuration
#
# Architecture: Decoupled Services
#   - Orchestrator: FastAPI server (handles HTTP API, publishes tasks)
#   - Worker: Celery workers (executes tasks, spawns agents)
# ============================================================================

# ----------------------------------------------------------------------------
# LiveKit Configuration (REQUIRED - Both Services)
# ----------------------------------------------------------------------------
# Get these from your LiveKit Cloud dashboard or self-hosted server
LIVEKIT_URL=wss://your-project.livekit.cloud
LIVEKIT_API_KEY=APIxxxxxxxxxxxxxxxxx
LIVEKIT_API_SECRET=secretxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# AI Service API Keys (REQUIRED - Worker Only)
# ----------------------------------------------------------------------------
# Groq LLM - https://console.groq.com/keys
GROQ_API_KEY=gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# AssemblyAI STT - https://www.assemblyai.com/app/account
ASSEMBLY_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Inworld TTS - https://studio.inworld.ai/
INWORLD_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# Database Configuration (REQUIRED - Both Services)
# ----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/voice_agent_db

# ----------------------------------------------------------------------------
# Redis Configuration (REQUIRED - Both Services)
# ----------------------------------------------------------------------------
# Message broker for Celery task queue + session state storage
# When using docker-compose, this is auto-configured
REDIS_URL=redis://redis:6379/0

# ----------------------------------------------------------------------------
# Orchestrator Configuration (Optional - Orchestrator Only)
# ----------------------------------------------------------------------------
# Maximum number of concurrent sessions
MAX_BOTS=50

# Session timeout in milliseconds (default: 30 minutes)
SESSION_TIMEOUT=1800000

# HTTP server port (default: 8000)
PORT=8000

# ----------------------------------------------------------------------------
# Worker Configuration (Optional - Worker Only)
# ----------------------------------------------------------------------------
# Agent startup timeout in seconds (how long to wait for LiveKit connection)
BOT_STARTUP_TIMEOUT=30

# Path to voice assistant script inside worker container
PYTHON_SCRIPT_PATH=/app/backend/agent/voice_assistant.py

# Agent log directory inside worker container
AGENT_LOG_DIR=/var/log/voice-agents

# Orchestrator URL for agent heartbeat callbacks
ORCHESTRATOR_URL=http://orchestrator:8000

# ----------------------------------------------------------------------------
# Logging Configuration (Optional - Both Services)
# ----------------------------------------------------------------------------
# Log level: DEBUG (dev/testing), INFO (prod), WARNING, ERROR, CRITICAL
# DEBUG enables timing instrumentation for performance analysis
LOG_LEVEL=INFO

# Log format: console (dev, human-readable) or json (prod, structured)
LOG_FORMAT=console

# ----------------------------------------------------------------------------
# Internal Configuration (Usually don't need to change)
# ----------------------------------------------------------------------------
# Python module path for imports
PYTHONPATH=/app
